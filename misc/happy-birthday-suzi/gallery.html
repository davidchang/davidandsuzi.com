<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Gallery | Say Hi to Suzi for her Birthday!</title>
    <link href="bootstrap.min.css" rel="stylesheet">
    <style>
      .wrap {
        max-width: 960px;
        padding: 10px 20px;
        margin-bottom: 60px;
      }
    </style>
  </head>
  <body>

    <div class="wrap">
      <h1>Please Say Hi to Suzi for her Birthday!</h1>
      <h2>Gallery</h2>
      <h3 id='loading'>Loading (may take a while)...</h3>

    <script src='https://cdn.firebase.com/js/client/1.0.2/firebase.js'></script>
    <script>
      var _gaq=[['_setAccount','UA-35626315-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>

    <script>
      var fb = new Firebase("https://davidchang.firebaseio.com/happyBirthday/data/");

      lastMessagesQuery = fb.endAt().limit(3);
      lastMessagesQuery.on('value', function(data) {
        document.getElementById('loading').style.display = 'none';
        var val = [];
        if (data && (val = data.val())) {
          console.log('here', val);
          for(var i in val) {
            console.log('hello', i);
            var img = document.createElement('img');
            img.src = val[i].src;
            document.body.appendChild(img);
          }
        }
      });
    </script>

  </body>
</html>
